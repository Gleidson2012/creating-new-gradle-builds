= Creating New Gradle Builds

Following this guide, you'll create a trivial Gradle project, invoke some of the basic Gradle commands, and get a sense of how Gradle manages the project.

== What you'll need

* About [.time-to-complete-text]#NN#
* A terminal application
* A Java Runtime Environment (JRE) or Java Development Kit (JDK), version 1.8 or later (only necessary to run Gradle)
* A https://gradle.org/install[Gradle distribution], version {gradle-version} or better

NOTE: Shell commands will be shown for Unix-based systems. The syntax for a Windows command prompt is similar, but you use `gradlew ...` in place of `./gradlew ...`.

== Initialize a project

First, create a new directory where the project will go:

[listing.terminal]
----
❯ mkdir basic-demo
❯ cd basic-demo
----

Now you can use Gradle's `init` command to generate a simple project. We will explore everything that is generated so you know exactly what's going on.

[listing.terminal]
----
❯ gradle init // <1>
include::{samplesoutputdir}/gradle-init.txt[]
----
<1> If you would prefer to use the Kotlin DSL, run `gradle init --dsl kotlin` instead. See the {user-manual}build_init_plugin.html#sec:what_to_set_up[documentation] for details.

The command should show "BUILD SUCCESSFUL" and generate the following "empty" project:

[source.multi-language-sample,groovy]
.Groovy
----
include::{samplesoutputdir}/file-tree.txt[tags=file-tree-all;file-tree-groovy]
----
[source.multi-language-sample,kotlin]
.Kotlin
----
include::{samplesoutputdir}/file-tree.txt[tags=file-tree-all;file-tree-kotlin]
----

<1> Gradle build script — defines what the build does
<2> {user-manual}gradle_wrapper.html[Gradle Wrapper] executable JAR
<3> Configuration of the Gradle Wrapper
<4> Executable Gradle Wrapper script for Unix-based systems
<5> Executable Gradle Wrapper batch file for Windows
<6> Gradle settings script — configures some of the structure of the build, such as the name of the root project and which projects are part of the build (see {user-manual}intro_multi_project_builds.html[the user manual] for more details on multi-project builds)

If you encounter an error or the project simply isn't created, please ensure that Gradle is {user-manual}installation.html[installed properly] and that you have the `JAVA_HOME` environment variable set correctly.

NOTE: `gradle init` can generate {user-manual}build_init_plugin.html#sec:build_init_types[various types of projects], and even knows how to translate simple `pom.xml` files to Gradle.

The build doesn't do anything right now because the build script is empty, so the next step is to add some behavior by creating a task.

== Create a task

Tasks are the workhorses of Gradle builds, providing most of the behavior. When you run a Gradle build, you're asking Gradle to execute one or more tasks.

For this example, you're going to set up a task that copies files from one directory to another. You don't have to code this yourself as Gradle provides a pre-existing task _type_ with the required behavior: {language-reference}org.gradle.api.tasks.Copy.html[`Copy`]. All you need to do is configure a task _instance_ of that type that defines what files should be copied and to where.

Follow these steps:

. Create a directory in the project named `src`.
. Add a text file named `myfile.txt` in the `src` directory you just created, with the contents
+
....
Hello, world!
....
. Replace the contents of the `build.gradle` file (or `build.gradle.kts` for a Kotlin DSL build) with the following:

[source.multi-language-sample,groovy]
.build.gradle
----
include::{samplescodedir}/copy.gradle[]
----
[source.multi-language-sample,kotlin]
.build.gradle.kts
----
include::{samplescodedir}/copy.gradle.kts[]
----

[NOTE]
====
The `group` and `description` properties can be anything you want, but they should be pertinent. You can also leave them out entirely, but doing so makes it a little harder for people to use your build.

The group and description are both part of the `gradle tasks` report and they help users identify what tasks do. And if you don't provide a group, `gradle tasks` won't display your task by default — you'll need to use `gradle tasks --all` instead.
====

You can now execute your new `copySources` task:

[listing]
----
❯ ./gradlew copySources
include::{samplesoutputdir}/gradle-copy.txt[]
----

Verify that it worked as expected by checking that there is now a file called `myfile.txt` in the `dest` directory, and that its contents match "Hello, world!".

[TIP]
====
You can also run the task using the shorthand `./gradlew cS`. Read more about task name abbreviation in the {user-manual}command_line_interface.html#task_name_abbreviation[user manual].
====

One thing you may expect to work is `./gradlew clean` or something similar, but if you try that, Gradle will tell you it can't find the task 'clean'. That's because the core of Gradle assumes almost nothing about your build. Instead, you can make use of _plugins_ to provide common and useful functionality, like a `clean` task. You'll do that next.

== Apply the Base Plugin

Gradle comes packaged with a range of core plugins, and you'll find many, many more on http://plugins.gradle.org[the Gradle Plugin Portal]. One of the core plugins — the {user-manual}base-plugin.html[Base Plugin] — provides a `clean` task as well as several other common lifecycle tasks like `assemble`, `check` and `build`.

To apply the Base Plugin to your build, insert the following block at the top of your build script:

[source.multi-language-sample,groovy]
.build.gradle
----
include::{samplescodedir}/with-base-plugin.gradle[tags=plugins]

... rest of the build file ...
----
[source.multi-language-sample,kotlin]
.build.gradle.kts
----
include::{samplescodedir}/with-base-plugin.gradle.kts[tags=plugins]

... rest of the build file ...
----

You will now be able to run `./gradlew clean`, but it seemingly won't do anything. That's because it deletes the build output directory, which is `build` by default, not `dest`.

You have two main options at this point:

 1. Copy the files into the `build` directory
 2. Change the value of the {language-reference}org.gradle.api.Project.html#org.gradle.api.Project:buildDir[`buildDir`] property to `dest`

We highly recommend sticking to conventions because it makes the lives of your users much easier if the build works just like every other Gradle build. So we will show you how to implement the first option and leave the second approach as an exercise for you.

To change the destination for the copy, all you need to do is modify its `into()` setting:

[source.multi-language-sample,groovy]
.build.gradle
----
include::{samplescodedir}/with-base-plugin.gradle[tags=copytask]
----

[source.multi-language-sample,kotlin]
.build.gradle.kts
----
include::{samplescodedir}/with-base-plugin.gradle.kts[tags=copytask]
----
<1> Creates a path relative to the `buildDir` project property — `build` by default

Note how the Groovy build script uses double quotes for the new value: only double-quote strings allow embedded expressions with the `$` or `${}` syntax.

That's it for this build, but there are plenty of other plugins to discover, particularly the ones that provide infrastructure for builds that target specific platforms, such as the JVM, Android, and native software.

== Explore and debug your build

Gradle provides several features to discover what a build does and how it behaves. We'll show you a couple of them in this section and you can find more of them in the user manual's {user-manual}command_line_interface.html[chapter on the command-line interface].

=== Discover available tasks

The `tasks` command lists Gradle tasks that you can invoke, including those added by you and the Base Plugin.

[listing.terminal]
----
❯ ./gradlew tasks

include::{samplesoutputdir}/gradle-tasks.txt[]
----

This command won't display all the tasks by default, so if you don't see a task that you expect to, try running `./gradlew tasks --all`.

=== Analyze and debug your build

Gradle provides a rich, web-based view of your build called a link:https://scans.gradle.com/[build scan]. Here's a link to one that you can explore:

image::basic-demo-build-scan.png[link=https://gradle.com/s/repnge6srr5qs]

By using the `--scan` option or by explicitly applying the Build Scan Plugin to your project, you can create a build scan at link:scans.gradle.com free of charge. Publishing build scans to scans.gradle.com transmits link:https://docs.gradle.com/build-scan-plugin/#captured_information[this] data to Gradle's servers. To keep your data on your own servers, check out link:https://gradle.com/enterprise[Gradle Enterprise].

Try creating a build scan by adding `--scan` when executing a task:

[listing]
----
❯ ./gradlew copySources --scan

include::{samplesoutputdir}/gradle-zip-scan.txt[]
----

If you browse around your build scan, you should be able to easily find out information like:

 * What tasks were executed
 * How long did the tasks take
 * Which plugins were applied
 
The scan contains plenty of other useful information too. Because of this, you should consider sharing a build scan the next time you request help on the https://discuss.gradle.org/[Gradle Forums] or https://stackoverflow.com/[Stack Overflow]. Doing so will help others learn about your build and identify solutions.

Learn more about how to configure and use build scans in the link:https://docs.gradle.com/build-scan-plugin/[Build Scan Plugin User Manual].


== Next Steps

Congratulations! You have created a new Gradle build and learned how to inspect Gradle builds!

Chances are you want to create a library or application for a specific platform, so here are some guides that will teach you more about creating builds for your platform of choice:

* {guides}/building-android-apps[Building Android Apps]
* {guides}/building-java-libraries[Building Java Libraries]
* {guides}/building-kotlin-jvm-libraries[Building Kotlin JVM Libraries]
* {guides}/building-cpp-executables[Building C++ Executables]
* {guides}/building-groovy-libraries[Building Groovy Libraries]
* {guides}/building-scala-libraries[Building Scala Libraries]

You can also find many link:https://github.com/gradle/gradle/tree/master/subprojects/docs/src/samples[sample Gradle builds on GitHub].

include::contribute[repo-path="gradle-guides/creating-new-gradle-builds"]
